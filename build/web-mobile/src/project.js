require=function t(o,e,i){function n(s,r){if(!e[s]){if(!o[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(c)return c(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var m=e[s]={exports:{}};o[s][0].call(m.exports,function(t){var e=o[s][1][t];return n(e||t)},m,m.exports,t,o,e,i)}return e[s].exports}for(var c="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({Ball:[function(t,o,e){"use strict";cc._RF.push(o,"0dbb4vS24BDCof7evRBUTfw","Ball"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.setLocalZOrder(2)},ballControll:function(){this.applyLinearImpulse(cc.v2(0,5500),this.getWorldCenter(),!0)}}),cc._RF.pop()},{}],BottomPoolHandler:[function(t,o,e){"use strict";cc._RF.push(o,"aadffIeJIVNwL1a0UZblL5n","BottomPoolHandler"),cc.Class({extends:cc.Component,properties:{},unuse:function(){},reuse:function(){this.node.setPosition(400,0)}}),cc._RF.pop()},{}],CheckGoal:[function(t,o,e){"use strict";cc._RF.push(o,"409faDkiMJFh4IrcGua5O2F","CheckGoal"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(t,o,e){e.node.y>o.node.y+o.getComponent(cc.PhysicsBoxCollider).offset.y?(cc.find("Canvas").getComponent("Game").getScore(),o.getComponent(cc.PhysicsBoxCollider).enabled=!1,cc.find("Canvas").getComponent("Game").removeRim(o)):cc.find("Canvas").getComponent("Game").gameOver()}}),cc._RF.pop()},{}],GameOver:[function(t,o,e){"use strict";cc._RF.push(o,"9b8726ratJK4IjhxJ1nxksD","GameOver"),cc.Class({extends:cc.Component,properties:{game:null,scoreLabel:cc.Label},restStartClick:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{}],Game:[function(t,o,e){"use strict";cc._RF.push(o,"280c3rsZJJKnZ9RqbALVwtK","Game");var i=cc.Enum({Menu:-1,Run:-1,Over:-1}),n={simple:[{x:500,y:-100,r:0},{x:500,y:100,r:0},{x:500,y:0,r:0},{x:500,y:200,r:0},{x:500,y:-200,r:0}],commonly:[{x:500,y:-200,r:-30},{x:500,y:0,r:30},{x:500,y:200,r:-45},{x:500,y:-100,r:45},{x:500,y:100,r:0}],difficulty:[{x:500,y:0,r:45},{x:500,y:-150,r:30},{x:500,y:-150,r:15},{x:500,y:200,r:0},{x:500,y:-125,r:-30}]};cc.Class({extends:cc.Component,properties:{gameOverPref:cc.Prefab,scoreLabel:cc.Label,ball:cc.RigidBody,topRim:cc.Prefab,bottomRim:cc.Prefab,rimSpeed:0,rims:[],isHollow:0,hollowNum:0,qiu:cc.ParticleSystem,hollowLabel:cc.Node,startTimer:cc.Label},statics:{Status:i},onLoad:function(){this.count=0;var t=this;this.rimPositionArr=[],this.ballInit=this.ball.node.getPosition(),this.status=i.Menu,this.score=0,this.GameOverPool=new cc.NodePool,this.topRimPool=new cc.NodePool("TopPoolHandler"),this.bottomRimPool=new cc.NodePool("BottomPoolHandler");for(var o in n)n[o].forEach(function(o,e){t.rimPositionArr.push(o)})},startGame:function(){this.status=i.Run,this.score=0,this.scoreLabel.string="score:"+this.score,this.ball.node.setPosition(this.ballInit),this.spawnRim({x:200,y:0,r:0}),this.node.on(cc.Node.EventType.TOUCH_START,this.ball.getComponent("Ball").ballControll,this.ball),this.ball.getComponent(cc.RigidBody).type=2},getScore:function(){if(this.status==i.Run){if(0==this.isHollow){this.qiu.resetSystem(),this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).resetSystem(),this.hollowNum++,this.score+=1*this.hollowNum;var t;switch(this.hollowNum){case 1:t={a:255,b:235,g:191,r:156},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=50,this.qiu.totalParticles=50;break;case 2:t={a:255,b:77,g:232,r:255},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=100,this.qiu.totalParticles=100;break;default:t={a:255,b:68,g:63,r:252},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=150,this.qiu.totalParticles=150}this.hollowLabel.getComponent("HollowAnim").init(this.hollowNum,t)}else this.isHollow=0,this.hollowNum=0;this.score++,this.scoreLabel.string="score:"+this.score}},gameOver:function(){this.status=i.Over;var t=this.GameOverPool.get();this.node.off(cc.Node.EventType.MOUSE_DOWN,this.ball.getComponent("Ball").ballControll,this.ball),t||(console.log("创建了结束面板"),(t=cc.instantiate(this.gameOverPref)).getComponent("GameOver").game=this.node),t.getComponent("GameOver").scoreLabel.string="score:"+this.score,this.node.addChild(t,5)},playBtnClick:function(){this.node.getChildByName("PlayBtn").active=!1,this.startGame()},spawnRim:function(t){++this.count==this.rimPositionArr.length&&(this.count=0);var o=this.topRimPool.get(),e=this.bottomRimPool.get();o||((o=cc.instantiate(this.topRim)).addComponent("TopPoolHandler"),o.setPosition({x:t.x,y:t.y}),o.setRotation(t.r)),e||((e=cc.instantiate(this.bottomRim)).addComponent("BottomPoolHandler"),e.setPosition({x:t.x,y:t.y}),e.setRotation(t.r)),this.node.addChild(o,1),this.node.addChild(e,3);var i={topRimNode:o,bottomRimNode:e};this.rims.push(i)},removeRim:function(t){var o=this;this.spawnRim(this.rimPositionArr[this.count]),this.rims.forEach(function(e,i){if(e.bottomRimNode==t.node)return e.topRimNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.topRimNode.destroy()}))),e.bottomRimNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.bottomRimNode.destroy()}))),o.rims.splice(0,1),!0})},update:function(t){this.rims.length>0&&1==this.status&&this.ball.node.x>this.rims[0].topRimNode.x+this.rims[0].topRimNode.width/2&&this.gameOver()}}),cc._RF.pop()},{}],Global:[function(t,o,e){"use strict";cc._RF.push(o,"acd2f+/UC1Mppz5G/NYQPnC","Global"),cc.director.getPhysicsManager().enabled=!0,cc._RF.pop()},{}],Ground:[function(t,o,e){"use strict";cc._RF.push(o,"c2d3f4r6DNIFJRQwY+wMwkB","Ground"),cc.Class({extends:cc.Component,properties:{game:cc.Node},onBeginContact:function(t,o,e){1==this.game.getComponent("Game").status&&this.game.getComponent("Game").gameOver()}}),cc._RF.pop()},{}],HollowAnim:[function(t,o,e){"use strict";cc._RF.push(o,"5d4d7iM0ZVBW7zeDlyBmQ/Z","HollowAnim"),cc.Class({extends:cc.Component,properties:{hollowScore:cc.Label},init:function(t,o){this.node.active=!0,this.hollowScore.node.color=o,this.node.color=o;var e=t+1;this.hollowScore.string="x"+e,this.getComponent(cc.Animation).play()}}),cc._RF.pop()},{}],IsHollow:[function(t,o,e){"use strict";cc._RF.push(o,"c4860SNY3dA45JcEoTUKJy+","IsHollow"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(t,o,e){cc.find("Canvas/Ball/qiuhuo").getComponent(cc.ParticleSystem).stopSystem(),cc.find("Canvas").getComponent("Game").isHollow=1}}),cc._RF.pop()},{}],Scroll:[function(t,o,e){"use strict";cc._RF.push(o,"36989y7Y39EKpyHqzNmSxfP","Scroll"),cc.Class({extends:cc.Component,properties:{speed:0,resetX:0,ball:cc.RigidBody,game:cc.Node},onload:function(){this.initSpeed=this.speed,this.initRimSpeed=this.game.getComponent("Game").rimSpeed},update:function(t){if(1==this.game.getComponent("Game").status){var o=this.ball.getComponent(cc.RigidBody).linearVelocity.x;console.log(o);var e=this.game.getComponent("Game").ballInit.x;this.ball.node.x=e,this.backgroundMove(t,o),this.rimMove(t,o)}},backgroundMove:function(t,o){if(this.node.x<=this.resetX&&(this.node.x-=this.resetX),0==o)this.node.x+=this.speed*t;else{Math.abs(o)<50&&(this.ball.getComponent(cc.RigidBody).linearVelocity={x:0,y:this.ball.getComponent(cc.RigidBody).linearVelocity.y});-20<o*t<0&&-40,this.node.x-=o*t}},rimMove:function(t,o){var e=this,i=this.game.getComponent("Game").rimSpeed;this.game.getComponent("Game").rims.forEach(function(n,c){if(0==o)n.topRimNode.x+=i*t,n.bottomRimNode.x+=i*t;else{Math.abs(o)<50&&(e.ball.getComponent(cc.RigidBody).linearVelocity={x:0,y:e.ball.getComponent(cc.RigidBody).linearVelocity.y});var s=o*t;-20<o*t<0&&(s=-40),n.topRimNode.x-=s,n.bottomRimNode.x-=s}})}}),cc._RF.pop()},{}],TopPoolHandler:[function(t,o,e){"use strict";cc._RF.push(o,"34ca7GyZL1D57gB+NCDh/+y","TopPoolHandler"),cc.Class({extends:cc.Component,properties:{},unuse:function(){},reuse:function(){this.node.setPosition(400,0)}}),cc._RF.pop()},{}]},{},["Ball","BottomPoolHandler","CheckGoal","Game","GameOver","Global","Ground","HollowAnim","IsHollow","Scroll","TopPoolHandler"]);
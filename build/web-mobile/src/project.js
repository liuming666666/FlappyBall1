require=function t(o,e,i){function c(s,r){if(!e[s]){if(!o[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(n)return n(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var m=e[s]={exports:{}};o[s][0].call(m.exports,function(t){var e=o[s][1][t];return c(e||t)},m,m.exports,t,o,e,i)}return e[s].exports}for(var n="function"==typeof require&&require,s=0;s<i.length;s++)c(i[s]);return c}({Ball:[function(t,o,e){"use strict";cc._RF.push(o,"0dbb4vS24BDCof7evRBUTfw","Ball"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.setLocalZOrder(2)},ballControll:function(){this.applyLinearImpulse(cc.v2(0,6e3),this.getWorldCenter(),!0)}}),cc._RF.pop()},{}],BottomPoolHandler:[function(t,o,e){"use strict";cc._RF.push(o,"aadffIeJIVNwL1a0UZblL5n","BottomPoolHandler"),cc.Class({extends:cc.Component,properties:{},unuse:function(){},reuse:function(){this.node.setPosition(400,0)}}),cc._RF.pop()},{}],CheckGoal:[function(t,o,e){"use strict";cc._RF.push(o,"409faDkiMJFh4IrcGua5O2F","CheckGoal"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(t,o,e){e.node.y>o.node.y+o.getComponent(cc.PhysicsBoxCollider).offset.y?(cc.find("Canvas").getComponent("Game").getScore(),o.getComponent(cc.PhysicsBoxCollider).enabled=!1,cc.find("Canvas").getComponent("Game").removeRim(o)):cc.find("Canvas").getComponent("Game").gameOver()}}),cc._RF.pop()},{}],GameOver:[function(t,o,e){"use strict";cc._RF.push(o,"9b8726ratJK4IjhxJ1nxksD","GameOver"),cc.Class({extends:cc.Component,properties:{game:null,scoreLabel:cc.Label},restStartClick:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{}],Game:[function(t,o,e){"use strict";cc._RF.push(o,"280c3rsZJJKnZ9RqbALVwtK","Game");var i=cc.Enum({Menu:-1,Run:-1,Over:-1}),c={simple:[{x:0,y:-100,r:0},{x:0,y:100,r:0},{x:0,y:0,r:0},{x:0,y:200,r:0},{x:0,y:-200,r:0}],commonly:[{x:0,y:-200,r:-15},{x:0,y:0,r:15},{x:0,y:200,r:-20},{x:0,y:-100,r:20},{x:0,y:100,r:0}],difficulty:[{x:0,y:0,r:30},{x:0,y:-150,r:30},{x:0,y:-150,r:-30},{x:0,y:200,r:0},{x:0,y:-125,r:-20}]};cc.Class({extends:cc.Component,properties:{gameOverPref:cc.Prefab,scoreLabel:cc.Label,ball:cc.RigidBody,topRim:cc.Prefab,bottomRim:cc.Prefab,rimSpeed:0,rims:[],isHollow:0,hollowNum:0,qiu:cc.ParticleSystem,hollowLabel:cc.Node,startTimer:cc.Label,displayScore:cc.Label,playBtn:cc.Node,mask:cc.Node,background:cc.Node},statics:{Status:i},onLoad:function(){this.mask.setLocalZOrder(4),this.playBtn.setLocalZOrder(5),this.ballInit=this.ball.node.getPosition()},init:function(){this.ball.getComponent(cc.RigidBody).linearVelocity={x:0,y:0};var t=this;this.rimPositionArr=[],this.status=i.Menu,this.score=0,this.GameOverPool=new cc.NodePool,this.topRimPool=new cc.NodePool("TopPoolHandler"),this.bottomRimPool=new cc.NodePool("BottomPoolHandler");for(var o in c)c[o].forEach(function(o,e){t.rimPositionArr.push(o)})},startGame:function(){this.init(),this.count=0,this.rims.forEach(function(t){t.topRimNode.destroy(),t.bottomRimNode.destroy()}),this.rims=[],this.score=0,this.scoreLabel.string=this.score,this.ball.node.setPosition(this.ballInit);for(var t=0;t<2;t++)this.spawnRim({x:200+400*t,y:0,r:0});this.status=i.Run,this.mask.active=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.ball.getComponent("Ball").ballControll,this.ball),this.ball.getComponent(cc.RigidBody).type=2},getScore:function(){var t=this;if(this.status==i.Run){if(0==this.isHollow){this.qiu.resetSystem(),this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).resetSystem(),this.hollowNum++,this.score+=1*this.hollowNum;var o;switch(this.hollowNum){case 1:o={a:255,b:235,g:191,r:156},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=50,this.qiu.totalParticles=50;break;case 2:o={a:255,b:77,g:232,r:255},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=100,this.qiu.totalParticles=100;break;default:o={a:255,b:68,g:63,r:252},this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles=150,this.qiu.totalParticles=150}this.hollowLabel.getComponent("HollowAnim").init(this.hollowNum,o)}else this.isHollow=0,this.hollowNum=0,this.displayScore.node.active=!0,this.displayScore.node.runAction(cc.sequence(cc.fadeTo(1,0),cc.callFunc(function(){t.displayScore.node.opacity=255,t.displayScore.node.active=!1})));this.score++,this.scoreLabel.string=this.score}},gameOver:function(){this.status=i.Over;this.GameOverPool.get();this.node.off(cc.Node.EventType.TOUCH_START,this.ball.getComponent("Ball").ballControll,this.ball),this.playBtn.active=!0,this.mask.active=!0},playBtnClick:function(){this.playBtn.active=!1,this.startGame()},spawnRim:function(t){++this.count==this.rimPositionArr.length&&(this.count=0);var o=this.topRimPool.get(),e=this.bottomRimPool.get();o||((o=cc.instantiate(this.topRim)).addComponent("TopPoolHandler"),o.setPosition({x:0==t.x?this.rims[this.rims.length-1].topRimNode.x+400:t.x,y:t.y}),o.setRotation(t.r)),e||((e=cc.instantiate(this.bottomRim)).addComponent("BottomPoolHandler"),e.setPosition({x:0==t.x?this.rims[this.rims.length-1].bottomRimNode.x+400:t.x,y:t.y}),e.setRotation(t.r)),this.node.addChild(o,1),this.node.addChild(e,3);var i={topRimNode:o,bottomRimNode:e};this.rims.push(i)},removeRim:function(t){var o=this;this.spawnRim(this.rimPositionArr[this.count]),this.rims.forEach(function(e,i){if(e.bottomRimNode==t.node)return e.topRimNode.removeComponent(cc.PhysicsBoxCollider),e.topRimNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.topRimNode.destroy()}))),e.bottomRimNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.bottomRimNode.destroy()}))),o.rims.splice(0,1),!0})},update:function(t){this.rims.length>0&&1==this.status&&this.ball.node.x>this.rims[0].topRimNode.x+this.rims[0].topRimNode.width/2&&this.gameOver()}}),cc._RF.pop()},{}],Global:[function(t,o,e){"use strict";cc._RF.push(o,"acd2f+/UC1Mppz5G/NYQPnC","Global"),cc.director.getPhysicsManager().enabled=!0,cc._RF.pop()},{}],Ground:[function(t,o,e){"use strict";cc._RF.push(o,"c2d3f4r6DNIFJRQwY+wMwkB","Ground"),cc.Class({extends:cc.Component,properties:{game:cc.Node},onBeginContact:function(t,o,e){1==this.game.getComponent("Game").status&&this.game.getComponent("Game").gameOver()}}),cc._RF.pop()},{}],HollowAnim:[function(t,o,e){"use strict";cc._RF.push(o,"5d4d7iM0ZVBW7zeDlyBmQ/Z","HollowAnim"),cc.Class({extends:cc.Component,properties:{hollowScore:cc.Label},init:function(t,o){this.node.active=!0,this.hollowScore.node.color=o,this.node.color=o;var e=t+1;this.hollowScore.string="x"+e,this.getComponent(cc.Animation).play()}}),cc._RF.pop()},{}],IsHollow:[function(t,o,e){"use strict";cc._RF.push(o,"c4860SNY3dA45JcEoTUKJy+","IsHollow"),cc.Class({extends:cc.Component,properties:{},onBeginContact:function(t,o,e){cc.find("Canvas/Ball/qiuhuo").getComponent(cc.ParticleSystem).stopSystem(),cc.find("Canvas").getComponent("Game").isHollow=1}}),cc._RF.pop()},{}],Scroll:[function(t,o,e){"use strict";cc._RF.push(o,"36989y7Y39EKpyHqzNmSxfP","Scroll"),cc.Class({extends:cc.Component,properties:{speed:0,resetX:0,ball:cc.RigidBody,game:cc.Node},onLoad:function(){this.initSpeed=this.speed,this.initRimSpeed=this.game.getComponent("Game").rimSpeed},update:function(t){if(1==this.game.getComponent("Game").status){var o=this.ball.getComponent(cc.RigidBody).linearVelocity.x,e=this.game.getComponent("Game").ballInit.x;this.ball.node.x=e,this.backgroundMove(t,o),this.rimMove(t,o)}},backgroundMove:function(t,o){if(this.node.x<=this.resetX&&(this.node.x-=this.resetX),0==o)this.speed>this.initSpeed&&(this.speed-=500*t),this.node.x+=this.speed*t;else{Math.abs(o)<20&&(this.speed=0);-20<o*t<0&&-40,this.node.x-=o*t}},rimMove:function(t,o){var e=this,i=this.game.getComponent("Game").rimSpeed;this.game.getComponent("Game").rims.forEach(function(c,n){if(0==o)i>e.initRimSpeed&&(e.game.getComponent("Game").rimSpeed-=500*t),c.topRimNode.x+=i*t,c.bottomRimNode.x+=i*t;else{Math.abs(o)<20&&(e.game.getComponent("Game").rimSpeed=0,e.ball.getComponent(cc.RigidBody).linearVelocity={x:0,y:e.ball.getComponent(cc.RigidBody).linearVelocity.y});var s=o*t;-20<o*t<0&&(s=-40),c.topRimNode.x-=s,c.bottomRimNode.x-=s}})}}),cc._RF.pop()},{}],TopPoolHandler:[function(t,o,e){"use strict";cc._RF.push(o,"34ca7GyZL1D57gB+NCDh/+y","TopPoolHandler"),cc.Class({extends:cc.Component,properties:{},unuse:function(){},reuse:function(){this.node.setPosition(400,0)}}),cc._RF.pop()},{}]},{},["Ball","BottomPoolHandler","CheckGoal","Game","GameOver","Global","Ground","HollowAnim","IsHollow","Scroll","TopPoolHandler"]);
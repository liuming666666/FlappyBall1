{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Scroll.js"],"names":["cc","Class","extends","Component","properties","speed","resetX","ball","RigidBody","game","Node","onLoad","initSpeed","initRimSpeed","getComponent","rimSpeed","update","dt","status","ballSpeed","linearVelocity","ballSpeedX","x","ballPositionX","ballInit","node","backgroundMove","rimMove","Math","abs","ballX","rims","forEach","rim","index","topRimNode","bottomRimNode","y"],"mappings":"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","file":"Scroll.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //背景移动速度\r\n        speed: 0,\r\n        //重置的边界\r\n        resetX: 0,\r\n        ball: cc.RigidBody,\r\n        game: cc.Node\r\n    },\r\n\r\n    onLoad: function() {\r\n        this.initSpeed = this.speed;    //背景移动初始值\r\n        this.initRimSpeed = this.game.getComponent(\"Game\").rimSpeed;    //篮筐移动初始值\r\n    },\r\n\r\n    update: function(dt) {\r\n        //Run状态才移动\r\n        if(this.game.getComponent(\"Game\").status == 1) {\r\n            var ballSpeed = this.ball.getComponent(cc.RigidBody).linearVelocity;    //篮球的速度对象\r\n            var ballSpeedX = ballSpeed.x;   //篮球的x轴速度\r\n            var ballPositionX = this.game.getComponent(\"Game\").ballInit.x; //篮球的原x位置\r\n            this.ball.node.x = ballPositionX;   //设置篮球始终在原位置\r\n            this.backgroundMove(dt,ballSpeedX);    //移动背景\r\n            this.rimMove(dt,ballSpeedX);   //移动篮框\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 背景移动\r\n     */\r\n    backgroundMove: function (dt,ballSpeedX) {\r\n        if(this.node.x <= this.resetX) {\r\n            this.node.x -= this.resetX;\r\n        }\r\n        //把球的位移给篮筐和背景，检测篮筐和背景的速度，快速恢复速度\r\n        /*if(ballSpeedX < 0 && this.speed < 0) {\r\n            //背景向右走\r\n            this.speed = -ballSpeedX;\r\n        }else if(ballSpeedX >= 0 && this.speed > 0) {\r\n            //背景向左走\r\n            this.speed = this.speed - ballSpeedX;\r\n        }\r\n        console.log(this.speed*dt);\r\n        console.log(ballSpeedX*dt);\r\n        this.node.x -= this.speed*dt;\r\n        //恢复背景速度\r\n        if(this.speed > this.initSpeed) {\r\n            this.speed -= 100*dt;\r\n        }else if(this.speed < this.initSpeed) {\r\n            this.speed += 100*dt;\r\n        }*/\r\n\r\n        if(ballSpeedX == 0) {\r\n            if(this.speed > this.initSpeed) {\r\n                this.speed -= 500*dt;\r\n            }\r\n            this.node.x += this.speed*dt;\r\n        }else{\r\n            if(Math.abs(ballSpeedX) < 50) {\r\n                this.speed = 0;     //设置背景的速度为零\r\n                //this.ball.getComponent(cc.RigidBody).linearVelocity = {x:0,y:this.ball.getComponent(cc.RigidBody).linearVelocity.y};\r\n            }\r\n            var ballX = ballSpeedX*dt;\r\n            if(-20 < ballSpeedX*dt < 0) {\r\n                ballX = -40;\r\n            }\r\n            this.node.x -= ballSpeedX*dt;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 篮筐移动\r\n     * @param dt\r\n     */\r\n    rimMove: function (dt,ballSpeedX) {\r\n        var rimSpeed = this.game.getComponent(\"Game\").rimSpeed;\r\n        this.game.getComponent(\"Game\").rims.forEach((rim,index) => {\r\n            /*if(ballSpeedX < 0) {\r\n                //篮筐向右走\r\n                rimSpeed = -ballSpeedX;\r\n            }else if(ballSpeedX >= 0) {\r\n                //篮筐向左走\r\n                rimSpeed += ballSpeedX;\r\n            }\r\n            rim.topRimNode.x += rimSpeed*dt;\r\n            rim.bottomRimNode.x += rimSpeed*dt;\r\n\r\n            if(rimSpeed > this.initRimSpeed) {\r\n                this.game.getComponent(\"Game\").rimSpeed -= 100*dt;\r\n            }else if(rimSpeed < this.initRimSpeed) {\r\n                this.game.getComponent(\"Game\").rimSpeed += 100*dt;\r\n            }*/\r\n\r\n            if(ballSpeedX == 0) {\r\n                if(rimSpeed > this.initRimSpeed) {\r\n                    this.game.getComponent(\"Game\").rimSpeed -= 500*dt;\r\n                }\r\n                rim.topRimNode.x += rimSpeed*dt;\r\n                rim.bottomRimNode.x += rimSpeed*dt;\r\n            }else{\r\n                if(Math.abs(ballSpeedX) < 50) {\r\n                    this.game.getComponent(\"Game\").rimSpeed=0;  //设置篮筐移动速度为零\r\n                    this.ball.getComponent(cc.RigidBody).linearVelocity = {x:0,y:this.ball.getComponent(cc.RigidBody).linearVelocity.y};\r\n                }\r\n                var ballX = ballSpeedX*dt;\r\n                if(-20 < ballSpeedX*dt < 0) {\r\n                    ballX = -30;\r\n                }\r\n                rim.topRimNode.x -= ballX;\r\n                rim.bottomRimNode.x -= ballX;\r\n            }\r\n        });\r\n    }\r\n\r\n});\r\n"]}
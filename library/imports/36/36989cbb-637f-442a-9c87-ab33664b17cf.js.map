{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Scroll.js"],"names":["cc","Class","extends","Component","properties","speed","resetX","ball","RigidBody","game","Node","onload","initSpeed","initRimSpeed","getComponent","rimSpeed","update","dt","status","ballSpeed","linearVelocity","ballSpeedX","x","console","log","ballPositionX","ballInit","node","backgroundMove","rimMove","Math","abs","y","ballX","rims","forEach","rim","index","topRimNode","bottomRimNode"],"mappings":"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","file":"Scroll.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //背景移动速度\r\n        speed: 0,\r\n        //重置的边界\r\n        resetX: 0,\r\n        ball: cc.RigidBody,\r\n        game: cc.Node\r\n    },\r\n\r\n    onload: function() {\r\n        this.initSpeed = this.speed;    //背景移动初始值\r\n        this.initRimSpeed = this.game.getComponent(\"Game\").rimSpeed;    //篮筐移动初始值\r\n    },\r\n\r\n    update: function(dt) {\r\n        //Run状态才移动\r\n        if(this.game.getComponent(\"Game\").status == 1) {\r\n            var ballSpeed = this.ball.getComponent(cc.RigidBody).linearVelocity;    //篮球的速度对象\r\n            var ballSpeedX = ballSpeed.x;   //篮球的x轴速度\r\n            console.log(ballSpeedX);\r\n            var ballPositionX = this.game.getComponent(\"Game\").ballInit.x; //篮球的原x位置\r\n            this.ball.node.x = ballPositionX;   //设置篮球始终在原位置\r\n            this.backgroundMove(dt,ballSpeedX);    //移动背景\r\n            this.rimMove(dt,ballSpeedX);   //移动篮框\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 背景移动\r\n     */\r\n    backgroundMove: function (dt,ballSpeedX) {\r\n        if(this.node.x <= this.resetX) {\r\n            this.node.x -= this.resetX;\r\n        }\r\n        if(ballSpeedX == 0) {\r\n            this.node.x += this.speed*dt;\r\n        }else{\r\n            if(Math.abs(ballSpeedX) < 50) {\r\n                //this.speed = 0;\r\n                this.ball.getComponent(cc.RigidBody).linearVelocity = {x:0,y:this.ball.getComponent(cc.RigidBody).linearVelocity.y};\r\n            }\r\n            var ballX = ballSpeedX*dt;\r\n            if(-20 < ballSpeedX*dt < 0) {\r\n                ballX = -40;\r\n            }\r\n            this.node.x -= ballSpeedX*dt;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 篮筐移动\r\n     * @param dt\r\n     */\r\n    rimMove: function (dt,ballSpeedX) {\r\n        var rimSpeed = this.game.getComponent(\"Game\").rimSpeed;\r\n        this.game.getComponent(\"Game\").rims.forEach((rim,index) => {\r\n            if(ballSpeedX == 0) {\r\n                rim.topRimNode.x += rimSpeed*dt;\r\n                rim.bottomRimNode.x += rimSpeed*dt;\r\n            }else{\r\n                if(Math.abs(ballSpeedX) < 50) {\r\n                    //this.speed = 0;\r\n                    this.ball.getComponent(cc.RigidBody).linearVelocity = {x:0,y:this.ball.getComponent(cc.RigidBody).linearVelocity.y};\r\n                }\r\n                var ballX = ballSpeedX*dt;\r\n                if(-20 < ballSpeedX*dt < 0) {\r\n                    ballX = -40;\r\n                }\r\n                rim.topRimNode.x -= ballX;\r\n                rim.bottomRimNode.x -= ballX;\r\n            }\r\n        });\r\n    }\r\n\r\n});\r\n"]}
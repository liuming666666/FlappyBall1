{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Game.js"],"names":["Status","cc","Enum","Menu","Run","Over","rimPosition","simple","x","y","r","commonly","difficulty","Class","extends","Component","properties","gameOverPref","Prefab","scoreLabel","Label","ball","RigidBody","topRim","bottomRim","rimSpeed","rims","isHollow","hollowNum","qiu","ParticleSystem","hollowLabel","Node","startTimer","statics","onLoad","count","self","rimPositionArr","ballInit","node","getPosition","status","score","GameOverPool","NodePool","topRimPool","bottomRimPool","key","forEach","value","index","push","startGame","string","setPosition","spawnRim","on","EventType","TOUCH_START","getComponent","ballControll","type","getScore","resetSystem","bottomRimNode","children","color","a","b","g","totalParticles","init","gameOver","gameOverNode","get","off","MOUSE_DOWN","console","log","instantiate","game","addChild","playBtnClick","getChildByName","active","position","length","topRimNode","addComponent","setRotation","rim","removeRim","runAction","sequence","fadeOut","callFunc","destroy","splice","update","dt","width"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\n * 挂载在canvas下面，控制游戏的主要进程逻辑\n * 得分，失败，重新开始\n */\n\nvar Status = cc.Enum({\n    Menu: -1,\n    Run: -1,\n    Over: -1\n});\n\n//随机节奏篮圈位置\nvar rimPosition = {\n    simple:[{x:500,y:-100,r:0},{x:500,y:100,r:0},{x:500,y:0,r:0},{x:500,y:200,r:0},{x:500,y:-200,r:0}],    //简单\n        commonly:[{x:500,y:-200,r:-30},{x:500,y:0,r:30},{x:500,y:200,r:-45},{x:500,y:-100,r:45},{x:500,y:100,r:0}],    //一般\n        difficulty: [{x:500,y:0,r:45},{x:500,y:-150,r:30},{x:500,y:-150,r:15},{x:500,y:200,r:0},{x:500,y:-125,r:-30}]  //困难\n};\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //游戏结束面板预制\n        gameOverPref: cc.Prefab,\n        //得分标签\n        scoreLabel: cc.Label,\n        //篮球\n        ball: cc.RigidBody,\n        //上篮筐\n        topRim: cc.Prefab,\n        //下篮筐\n        bottomRim: cc.Prefab,\n        //篮筐移动速度\n        rimSpeed: 0,\n        rims: [],\n        //是不是空心,默认是空心\n        isHollow:0,\n        //空心次数\n        hollowNum: 0,\n        //球粒子\n        qiu: cc.ParticleSystem,\n        //空心球分数特效节点\n        hollowLabel: cc.Node,\n        startTimer: cc.Label\n    },\n\n    statics: {\n        Status\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.count = 0;\n        var self = this;\n        this.rimPositionArr = [];\n        //记录篮球初始位置\n        this.ballInit = this.ball.node.getPosition();\n        //游戏状态主菜单界面\n        this.status = Status.Menu;\n        //分数初始化\n        this.score = 0;\n        //游戏结束面板池\n        this.GameOverPool = new cc.NodePool();\n        //上篮筐池\n        this.topRimPool = new cc.NodePool(\"TopPoolHandler\");\n        //下篮筐池\n        this.bottomRimPool = new cc.NodePool(\"BottomPoolHandler\");\n\n        for(var key in rimPosition) {\n            rimPosition[key].forEach((value,index) => {\n                self.rimPositionArr.push(value);\n            });\n        }\n        //this.scheduleOnce(this.gameOver, 5);\n    },\n\n    /**\n     * 开始游戏\n     */\n    startGame: function() {\n        //修改游戏状态\n        this.status = Status.Run;\n        this.score = 0;\n        this.scoreLabel.string = \"score:\" + this.score;\n        //回归篮球位置\n        this.ball.node.setPosition(this.ballInit);\n        //背景开始移动，开始生成篮筐\n        this.spawnRim({x:200,y:0,r:0});\n        //添加球控制事件\n        this.node.on(cc.Node.EventType.TOUCH_START,\n            this.ball.getComponent(\"Ball\").ballControll,this.ball);\n\n        //把球修改成动态的\n        this.ball.getComponent(cc.RigidBody).type = 2;\n    },\n\n    /**\n     * 获得分数，并修改\n     */\n    getScore: function() {\n        if(this.status == Status.Run) {\n            if(this.isHollow == 0) {\n                //开启粒子系统\n                this.qiu.resetSystem();\n                this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).resetSystem();\n                this.hollowNum++;\n                this.score += this.hollowNum*1;\n                var color;\n                switch (this.hollowNum) {\n                    case 1 :\n                         color = {\n                            a: 255,\n                            b: 235,\n                            g: 191,\n                            r: 156\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 50;\n                        this.qiu.totalParticles = 50;\n                        break;\n                    case 2 :\n                        color = {\n                            a: 255,\n                            b: 77,\n                            g: 232,\n                            r: 255\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 100;\n                        this.qiu.totalParticles = 100;\n                        break;\n                    default :\n                        color = {\n                            a: 255,\n                            b: 68,\n                            g: 63,\n                            r: 252\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 150;\n                        this.qiu.totalParticles = 150;\n                }\n                this.hollowLabel.getComponent(\"HollowAnim\").init(this.hollowNum ,color);\n            }else{\n                this.isHollow = 0;\n                this.hollowNum =0;\n            }\n            this.score++;\n            //修改分数显示的值\n            this.scoreLabel.string = \"score:\" + this.score;\n            //播放得分音效\n            //cc.audioEngine.play(音频文件,false,1);\n        }\n    },\n\n    /**\n     * 游戏结束\n     */\n    gameOver: function() {\n        //游戏结束，修改游戏状态\n        this.status = Status.Over;\n        var gameOverNode = this.GameOverPool.get();\n        //取消绑定时间\n        this.node.off(cc.Node.EventType.MOUSE_DOWN, this.ball.getComponent(\"Ball\").ballControll,this.ball);\n        if(!gameOverNode) {\n            console.log(\"创建了结束面板\");\n            //制造游戏结束预制节点\n            gameOverNode = cc.instantiate(this.gameOverPref);\n\n            //把节点传给GAMEOVER\n            gameOverNode.getComponent(\"GameOver\").game = this.node;\n        }\n        gameOverNode.getComponent(\"GameOver\").scoreLabel.string = \"score:\" + this.score;\n        //把生成的GameOver节点挂到Canvas下面\n        this.node.addChild(gameOverNode,5);\n    },\n\n    /**\n     * play按钮点击事件\n     */\n    playBtnClick: function() {\n        //开始按钮隐藏\n        this.node.getChildByName(\"PlayBtn\").active = false;\n        /*var time = 1;\n        this.startTimer.string = 'Ready';\n        this.startTimer.node.active = true;\n        this.startTimer.node.opacity = 255;\n        this.startTimer.node.runAction(cc.sequence(cc.scaleTo(0.2,1.5),cc.scaleTo(0.2,1),cc.fadeOut(0.6),cc.callFunc(()=>{\n            time--;\n\n        if(time<0){\n            this.startTimer.node.stopAllActions();\n            this.node.on(cc.Node.EventType.TOUCH_START,(event)=>{\n\n            }\n        );\n        }else{\n            this.startTimer.node.opacity = 255;\n            if(time==0){\n                this.startTimer.string = 'Go!';\n            }else{\n                this.startTimer.string = 'Ready';\n            }\n        }\n    })).repeatForever());*/\n        this.startGame();\n    },\n\n    /**\n     * 生成篮筐\n     */\n    spawnRim: function(position) {\n        this.count ++;\n        if(this.count == this.rimPositionArr.length) {\n            this.count = 0;\n        }\n        var topRimNode = this.topRimPool.get();\n        var bottomRimNode = this.bottomRimPool.get();\n        //var rimPositionArr = rimPosition.simple;   //简单数组\n        //var index = Math.floor((Math.random()*rimPositionArr.length));\n        if(!topRimNode) {\n            //上篮筐\n            topRimNode = cc.instantiate(this.topRim);\n            topRimNode.addComponent('TopPoolHandler');\n            topRimNode.setPosition({\n                x:position[\"x\"],\n                y:position.y\n            });\n            topRimNode.setRotation(position.r);\n        }\n        if(!bottomRimNode) {\n            //下篮筐\n            bottomRimNode = cc.instantiate(this.bottomRim);\n            bottomRimNode.addComponent('BottomPoolHandler');\n            bottomRimNode.setPosition({\n                x:position.x,\n                y:position.y\n            });\n            bottomRimNode.setRotation(position.r);\n        }\n        this.node.addChild(topRimNode,1);\n        this.node.addChild(bottomRimNode,3);\n        //默认为空心球,0为空心\n        var rim = {\n            topRimNode: topRimNode,\n            bottomRimNode: bottomRimNode\n        };\n        this.rims.push(rim);\n\n    },\n\n    /**\n     * 移除篮筐\n     */\n    removeRim: function(bottomRim) {\n        this.spawnRim(this.rimPositionArr[this.count]);\n        this.rims.forEach((rim,index) => {\n            if(rim.bottomRimNode == bottomRim.node) {\n                rim.topRimNode.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(()=>{\n                    rim.topRimNode.destroy();\n                })));\n                rim.bottomRimNode.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(()=>{\n                    rim.bottomRimNode.destroy();\n                })));\n                //this.topRimPool.put(value.topRimNode);\n                //this.bottomRimPool.put(value.bottomRimNode);\n                this.rims.splice(0,1);\n                return true;\n            }\n        });\n    },\n\n    // called every frame，每一帧调用更新\n    update: function (dt) {\n        if(this.rims.length >0 && this.status == 1 && this.ball.node.x> this.rims[0].topRimNode.x + this.rims[0].topRimNode.width/2) {\n            this.gameOver();\n        }\n    }\n\n});\n"]}
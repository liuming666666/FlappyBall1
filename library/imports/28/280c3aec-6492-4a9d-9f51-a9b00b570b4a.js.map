{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Game.js"],"names":["Status","cc","Enum","Menu","Run","Over","rimPosition","simple","x","y","r","commonly","difficulty","Class","extends","Component","properties","gameOverPref","Prefab","scoreLabel","Label","ball","RigidBody","topRim","bottomRim","rimSpeed","rims","isHollow","hollowNum","qiu","ParticleSystem","hollowLabel","Node","startTimer","displayScore","playBtn","mask","background","statics","onLoad","setLocalZOrder","ballInit","node","getPosition","init","getComponent","linearVelocity","self","rimPositionArr","status","score","GameOverPool","NodePool","topRimPool","bottomRimPool","key","forEach","value","index","push","startGame","count","topRimNode","destroy","bottomRimNode","string","setPosition","i","spawnRim","active","on","EventType","TOUCH_START","ballControll","type","getScore","resetSystem","children","color","a","b","g","totalParticles","runAction","sequence","fadeTo","callFunc","opacity","gameOver","gameOverNode","get","off","playBtnClick","position","length","instantiate","addComponent","setRotation","addChild","rim","removeRim","removeComponent","PhysicsBoxCollider","fadeOut","splice","update","dt","width"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["/**\n * 挂载在canvas下面，控制游戏的主要进程逻辑\n * 得分，失败，重新开始\n */\n\nvar Status = cc.Enum({\n    Menu: -1,\n    Run: -1,\n    Over: -1\n});\n\n//随机节奏篮圈位置\nvar rimPosition = {\n    simple:[{x:0,y:-100,r:0},{x:0,y:100,r:0},{x:0,y:0,r:0},{x:0,y:200,r:0},{x:0,y:-200,r:0}],    //简单\n        commonly:[{x:0,y:-200,r:-15},{x:0,y:0,r:15},{x:0,y:200,r:-20},{x:0,y:-100,r:20},{x:0,y:100,r:0}],    //一般\n        difficulty: [{x:0,y:0,r:30},{x:0,y:-150,r:30},{x:0,y:-150,r:-30},{x:0,y:200,r:0},{x:0,y:-125,r:-20}]  //困难\n};\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //游戏结束面板预制\n        gameOverPref: cc.Prefab,\n        //得分标签\n        scoreLabel: cc.Label,\n        //篮球\n        ball: cc.RigidBody,\n        //上篮筐\n        topRim: cc.Prefab,\n        //下篮筐\n        bottomRim: cc.Prefab,\n        //篮筐移动速度\n        rimSpeed: 0,\n        rims: [],\n        //是不是空心,默认是空心\n        isHollow:0,\n        //空心次数\n        hollowNum: 0,\n        //球粒子\n        qiu: cc.ParticleSystem,\n        //空心球分数特效节点\n        hollowLabel: cc.Node,\n        startTimer: cc.Label,\n        displayScore: cc.Label,\n        playBtn: cc.Node,\n        mask: cc.Node,\n        background: cc.Node\n    },\n\n    statics: {\n        Status\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        //设置轴位置\n        this.mask.setLocalZOrder(4);\n        this.playBtn.setLocalZOrder(5);\n        //记录篮球初始位置\n        this.ballInit = this.ball.node.getPosition();\n        //this.scheduleOnce(this.gameOver, 5);\n    },\n\n    init: function() {\n        this.ball.getComponent(cc.RigidBody).linearVelocity = {x:0,y:0};\n        /*console.log(this.background.getComponent(\"Scroll\").initSpeed);\n        this.background.speed = this.background.getComponent(\"Scroll\").initSpeed;\n        this.rimSpeed = this.background.getComponent(\"Scroll\").initRimSpeed;*/\n        var self = this;\n        //初始化篮筐位置数组\n        this.rimPositionArr = [];\n        //游戏状态主菜单界面\n        this.status = Status.Menu;\n        //分数初始化\n        this.score = 0;\n        //游戏结束面板池\n        this.GameOverPool = new cc.NodePool();\n        //上篮筐池\n        this.topRimPool = new cc.NodePool(\"TopPoolHandler\");\n        //下篮筐池\n        this.bottomRimPool = new cc.NodePool(\"BottomPoolHandler\");\n        //把篮球位置全装进数组\n        for(var key in rimPosition) {\n            rimPosition[key].forEach((value,index) => {\n                self.rimPositionArr.push(value);\n            });\n        }\n    },\n\n    /**\n     * 开始游戏\n     */\n    startGame: function() {\n\n        //初始化游戏参数\n        this.init();\n        this.count = 0;\n        //清除全部篮筐\n        this.rims.forEach((value) => {\n            value.topRimNode.destroy();\n            value.bottomRimNode.destroy();\n        });\n        this.rims = [];\n        this.score = 0;\n        this.scoreLabel.string = this.score;\n        //回归篮球位置\n        this.ball.node.setPosition(this.ballInit);\n        //背景开始移动，开始生成篮筐\n        for(let i=0 ; i<2; i++) {\n            this.spawnRim({x:200+400*i,y:0,r:0});\n        }\n        //修改游戏状态\n        this.status = Status.Run;\n        //隐藏遮罩层\n        this.mask.active = false;\n        //添加球控制事件\n        this.node.on(cc.Node.EventType.TOUCH_START,\n            this.ball.getComponent(\"Ball\").ballControll,this.ball);\n\n        //把球修改成动态的\n        this.ball.getComponent(cc.RigidBody).type = 2;\n    },\n\n    /**\n     * 获得分数，并修改\n     */\n    getScore: function() {\n        if(this.status == Status.Run) {\n            if(this.isHollow == 0) {\n                //开启粒子系统\n                this.qiu.resetSystem();\n                this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).resetSystem();\n                this.hollowNum++;\n                this.score += this.hollowNum*1;\n                var color;\n                switch (this.hollowNum) {\n                    case 1 :\n                         color = {\n                            a: 255,\n                            b: 235,\n                            g: 191,\n                            r: 156\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 50;\n                        this.qiu.totalParticles = 50;\n                        break;\n                    case 2 :\n                        color = {\n                            a: 255,\n                            b: 77,\n                            g: 232,\n                            r: 255\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 100;\n                        this.qiu.totalParticles = 100;\n                        break;\n                    default :\n                        color = {\n                            a: 255,\n                            b: 68,\n                            g: 63,\n                            r: 252\n                        };\n                        this.rims[0].bottomRimNode.children[0].getComponent(cc.ParticleSystem).totalParticles = 150;\n                        this.qiu.totalParticles = 150;\n                }\n                this.hollowLabel.getComponent(\"HollowAnim\").init(this.hollowNum ,color);\n            }else{\n                this.isHollow = 0;\n                this.hollowNum =0;\n                this.displayScore.node.active = true;\n                this.displayScore.node.runAction(cc.sequence(cc.fadeTo(1,0),cc.callFunc(() => {\n                        this.displayScore.node.opacity = 255;\n                        this.displayScore.node.active = false;\n                })));\n            }\n            this.score++;\n            //修改分数显示的值\n            this.scoreLabel.string = this.score;\n            //播放得分音效\n            //cc.audioEngine.play(音频文件,false,1);\n        }\n    },\n\n    /**\n     * 游戏结束\n     */\n    gameOver: function() {\n        //游戏结束，修改游戏状态\n        this.status = Status.Over;\n        var gameOverNode = this.GameOverPool.get();\n        //取消绑定时间\n        this.node.off(cc.Node.EventType.TOUCH_START, this.ball.getComponent(\"Ball\").ballControll,this.ball);\n        this.playBtn.active = true;\n        this.mask.active = true;\n        /*if(!gameOverNode) {\n            console.log(\"创建了结束面板\");\n            //制造游戏结束预制节点\n            gameOverNode = cc.instantiate(this.gameOverPref);\n\n            //把节点传给GAMEOVER\n            gameOverNode.getComponent(\"GameOver\").game = this.node;\n        }\n        gameOverNode.getComponent(\"GameOver\").scoreLabel.string = \"score:\" + this.score;\n        //把生成的GameOver节点挂到Canvas下面\n        this.node.addChild(gameOverNode,5);*/\n    },\n\n    /**\n     * play按钮点击事件\n     */\n    playBtnClick: function() {\n        //开始按钮隐藏\n        this.playBtn.active = false;\n        /*var time = 1;\n        this.startTimer.string = 'Ready';\n        this.startTimer.node.active = true;\n        this.startTimer.node.opacity = 255;\n        this.startTimer.node.runAction(cc.sequence(cc.scaleTo(0.2,1.5),cc.scaleTo(0.2,1),cc.fadeOut(0.6),cc.callFunc(()=>{\n            time--;\n\n        if(time<0){\n            this.startTimer.node.stopAllActions();\n            this.node.on(cc.Node.EventType.TOUCH_START,(event)=>{\n\n            }\n        );\n        }else{\n            this.startTimer.node.opacity = 255;\n            if(time==0){\n                this.startTimer.string = 'Go!';\n            }else{\n                this.startTimer.string = 'Ready';\n            }\n        }\n    })).repeatForever());*/\n        this.startGame();\n    },\n\n    /**\n     * 生成篮筐\n     */\n    spawnRim: function(position) {\n        this.count ++;\n        if(this.count == this.rimPositionArr.length) {\n            this.count = 0;\n        }\n        var topRimNode = this.topRimPool.get();\n        var bottomRimNode = this.bottomRimPool.get();\n        //var rimPositionArr = rimPosition.simple;   //简单数组\n        //var index = Math.floor((Math.random()*rimPositionArr.length));\n        if(!topRimNode) {\n            //上篮筐\n            topRimNode = cc.instantiate(this.topRim);\n            topRimNode.addComponent('TopPoolHandler');\n            topRimNode.setPosition({\n                x:position.x == 0 ? this.rims[this.rims.length-1].topRimNode.x+400 : position.x,\n                y:position.y\n            });\n            topRimNode.setRotation(position.r);\n        }\n        if(!bottomRimNode) {\n            //下篮筐\n            bottomRimNode = cc.instantiate(this.bottomRim);\n            bottomRimNode.addComponent('BottomPoolHandler');\n            bottomRimNode.setPosition({\n                x:position.x == 0 ? this.rims[this.rims.length-1].bottomRimNode.x+400 : position.x,\n                y:position.y\n            });\n            bottomRimNode.setRotation(position.r);\n        }\n        this.node.addChild(topRimNode,1);\n        this.node.addChild(bottomRimNode,3);\n        //默认为空心球,0为空心\n        var rim = {\n            topRimNode: topRimNode,\n            bottomRimNode: bottomRimNode\n        };\n        this.rims.push(rim);\n\n    },\n\n    /**\n     * 移除篮筐\n     */\n    removeRim: function(bottomRim) {\n        this.spawnRim(this.rimPositionArr[this.count]);\n        this.rims.forEach((rim,index) => {\n            if(rim.bottomRimNode == bottomRim.node) {\n                rim.topRimNode.removeComponent(cc.PhysicsBoxCollider);\n                rim.topRimNode.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(()=>{\n                    rim.topRimNode.destroy();\n                })));\n                rim.bottomRimNode.runAction(cc.sequence(cc.fadeOut(0.5),cc.callFunc(()=>{\n                    rim.bottomRimNode.destroy();\n                })));\n                //this.topRimPool.put(value.topRimNode);\n                //this.bottomRimPool.put(value.bottomRimNode);\n                this.rims.splice(0,1);\n                return true;\n            }\n        });\n    },\n\n    // called every frame，每一帧调用更新\n    update: function (dt) {\n        if(this.rims.length >0 && this.status == 1 && this.ball.node.x> this.rims[0].topRimNode.x + this.rims[0].topRimNode.width/2) {\n            this.gameOver();\n        }\n    }\n\n});\n"]}